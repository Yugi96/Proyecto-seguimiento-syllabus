<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Title</title>
        <style type="text/css">
            body {
                font-family: "Times New Roman";
                font-weight: 200;
                font-size: 8px;
            }
            
            table {
                border-collapse:collapse;
            }

            td, th {
                border: 1px solid #000;
                padding: 10px 5px;
            }

            .verticalText {
                writing-mode: vertical-lr;
                transform: rotate(180deg);
                }

            
        </style>
    </head>
    <body>
        <table >
            <tr>
                <th rowspan="3">DOCENTE</th>
                <th rowspan="3">CÓDIGO DE LA ASIGNATURA</th>
                <th rowspan="3">ASIGNATURA</th>
                <th rowspan="3">S<br>E<br>M<br>E<br>S<br>T<br>R<br>E</th>
                <th colspan="6">AVANCE DE CONTENIDOS SEGÚN EL SYLLABUS CORRESPONDIENTES AL PERIODO<br>DEL {{ seguimiento_list.0.seg_fecha |date:'j' }} DE 
                    {{ seguimiento_list.0.seg_fecha |date:'F' | upper }} AL 
                    {% for seguimiento in seguimiento_list %}
                        {% if forloop.last %}
                            {{ seguimiento.seg_fecha |date:'j' }} DE 
                            {{ seguimiento.seg_fecha |date:'F'| upper }} DE 
                            {{ seguimiento.seg_fecha |date:'Y' }} </th>
                    {% endif %}
                    {% endfor %}
            </tr>
            <tr>
                <th rowspan="2">Avance registrado en el SIUTMACH (%)</td>
                <th colspan="3">Avance registrado por el seguimiento al syllabus del estudiante (%)<br>(registros del {{ seguimiento_list.0.seg_fecha |date:'d/m/Y' }} al 
                    {% for seguimiento in seguimiento_list %}
                        {% if forloop.last %}
                            {{ seguimiento.seg_fecha |date:'d/m/Y' }}
                    {% endif %}
                {% endfor %}
                </th>
                <th rowspan="2">Observaciones (según el seguimiento al syllabus por parte del estudiante)</th>
                <th rowspan="2">Nombre de estudiante del seguimiento al syllabus</th>
            </tr>
            <tr id="num-semanas-rango-content">
                <th>30/04/2018-04/05/2018</th>
                <th>07/05/2018-11/05/2018</th>
                <th>TOTAL</th>
            </tr>
            <tr>
            </tr>
            
        </table>
        <div id="ejemplo">
            {{curso}}
        </div>
        <script>
            var rangoSemanas = document.getElementById('num-semanas-rango-content');
            var semanasList = [];
            var seguimientoCompleto = [];
            var rangoSemanaFecha = []

            {% for semana in semanas %}
                semanasList.push("{{semana}}")
            {% endfor %}

            {% for seguimiento in seguimiento_list %}
                seguimientoCompleto.push([
                "{{seguimiento.seg_porcentaje_real}}",
                "{{seguimiento.seg_porcentaje_ideal}}",
                "{{seguimiento.seg_observaciones}}",
                "{{seguimiento.docente.doc_apellidos}}" + "{{seguimiento.docente.doc_nombres}}",
                "{{seguimiento.seg_fecha |date:'d/m/Y'}}",
                "{{seguimiento.asignatura.asi_codigo }}",
                "{{seguimiento.asignatura.asi_nombre }}",
                "{{seguimiento.semestre }}",
                "{{seguimiento.seg_paralelo }}",
                "{{seguimiento.seg_semana }}",
                ])

            {% endfor %}

            
            for(var i=0;i<semanasList.length;i++){
                aux = []
                for(var k=0;k<seguimientoCompleto.length;k++){
                    if(semanasList[i] == seguimientoCompleto[k][9]){
                        aux.push([[semanasList[i]], seguimientoCompleto[k][4]])
                    }
                }
                rangoSemanaFecha.push(aux)
            }
            
            document.getElementById('ejemplo').innerHTML = rangoSemanaFecha;
            function createRangoSemana(texto){
                item = document.createElement('th');
                item.textContent = texto;
            }
        </script>
    </body>
</html>